<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="_PRVW__aefc9f36cc1a330045ed786397014e2f">aafc9f36db1a3300ed7290c7db961930</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"378a0b130e044003b3af4e300633e5eb","triggerType":"request","applicability":{"type":"Applicability","mode":"script","value":"true"},"id":"378a0b130e044003b3af4e300633e5eb"}],"goals":[{"name":"primary","trigger_id":"378a0b130e044003b3af4e300633e5eb","nodes":[{"type":"StartGoal","goal_id":"123977e41c764de2b530cfbeea1d3fd1","greeting_msg":{"type":"String","mode":"string","value":"I can help you find employees in the company directory."},"id":"e21f4d7774f849ddaf1af2370d4cb80a","name":"Start"},{"type":"TerminateGoal","goal_id":"123977e41c764de2b530cfbeea1d3fd1","confirmation_msg":{"type":"String","mode":"string","value":"Thanks for talking with me."},"id":"53ff3c44197e4da89fc11b8d74407b3a","name":"End"},{"type":"InputPrompt","variable_id":"3ab5e9c534314dbb9f29b74600358253","message":{"type":"String","mode":"string","value":"Who are you looking for, {{vaInputs.user.first_name}}?"},"acknowledgement":{"type":"String","mode":"string","value":"Got it. Let me take a look."},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false},"optional":false,"id":"f932d029eb0f4996ae98b497ea34cfc5","name":"Employee name","goal_id":"123977e41c764de2b530cfbeea1d3fd1","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"9e763933b9984b48a8c59e49a3b570cc","name":"List employees","goal_id":"123977e41c764de2b530cfbeea1d3fd1","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"d6242fe695644a68b5fecb4375483452","message":{"type":"String","mode":"string","value":"Your search of {{vaInputs.employee_name}} had multiple results. Which of these employees are you trying to find?"},"acknowledgement":{"type":"String","mode":"string","value":"Here are the employee details."},"optional":false,"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false},"expression_mode":"script","script":"    (function execute(table) {\n        // Initialize an array for the options\n        var options = [];\n    \n        // Query the table selected in the Choice List Setting\n        var grUser = new GlideRecord(table);\n        grUser.addQuery('name','CONTAINS',vaInputs.employee_name);\n        grUser.query();\n    \n        // Push a value/label pair into the array for each record found by the query\n        // Always use getUniqueValue() for the value\n        // Concatenate field values for the label\n        while(grUser.next()) {\n            options.push({ 'value': grUser.getUniqueValue(),\n            'label': grUser.getValue('name') + \", \" + grUser.getValue('title') + \" - \" + \n            grUser.getDisplayValue('location') });\n        }\n    \n        // Return the array\n        return options;\n    \n    })(table)\n\n    ","no_options_found_message":{"type":"String","mode":"string","value":"No records match your search criteria."},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"    (function execute(table) {\n        // Initialize an array for the options\n        var options = [];\n    \n        // Query the table selected in the Choice List Setting\n        var grUser = new GlideRecord(table);\n        grUser.addQuery('name','CONTAINS',vaInputs.employee_name);\n        grUser.query();\n    \n        // Push a value/label pair into the array for each record found by the query\n        // Always use getUniqueValue() for the value\n        // Concatenate field values for the label\n        while(grUser.next()) {\n            options.push({ 'value': grUser.getUniqueValue(),\n            'label': grUser.getValue('name') + \", \" + grUser.getValue('title') + \" - \" + \n            grUser.getDisplayValue('location') });\n        }\n    \n        // Return the array\n        return options;\n    \n    })(table)\n\n    "}},{"type":"RecordOutputPrompt","mode":"variable","table":"sys_user","variable_id":"d6242fe695644a68b5fecb4375483452","fields":["user_name","email","phone","mobile_phone"],"id":"6a74529530034c2ab624709742623a09","name":"Show Employee","goal_id":"123977e41c764de2b530cfbeea1d3fd1","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"variable","value":""}},{"type":"Decision","name":"Look up another employee?","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"another_lookup="},"id":"d7c04184b0cb4861b1ed6284806b6fa0","name":"No"},{"type":"Branch","label":"Always","expression":{"type":"Applicability","mode":"query","value":""},"id":"8c0ceda9f5344e67a6f8c13995c3b9a7","name":"Always"}],"id":"00be8a4206dd4dd6b79adebe94235a29","goal_id":"123977e41c764de2b530cfbeea1d3fd1"},{"type":"InputPrompt","variable_id":"4d355cfdfd8d48dd93a2a812b8305091","message":{"type":"String","mode":"string","value":"Would you like to look up another employee?"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false},"optional":false,"id":"6a0fd9f024904b5da144819de3e3a0df","name":"Another lookup","goal_id":"123977e41c764de2b530cfbeea1d3fd1","applicability":{"type":"Applicability","mode":"script","value":"true"}}],"edges":[{"type":"Edge","source_node_id":"e21f4d7774f849ddaf1af2370d4cb80a","target_node_id":"f932d029eb0f4996ae98b497ea34cfc5","id":"2e4381b9d05944c3ae6784108347447c"},{"type":"Edge","source_node_id":"f932d029eb0f4996ae98b497ea34cfc5","target_node_id":"9e763933b9984b48a8c59e49a3b570cc","id":"75609ae4367d495dad4001da474c039e"},{"type":"Edge","source_node_id":"9e763933b9984b48a8c59e49a3b570cc","target_node_id":"6a74529530034c2ab624709742623a09","id":"af7b84561ce8497c80aa30e779905fb9"},{"type":"Edge","source_node_id":"6a74529530034c2ab624709742623a09","target_node_id":"6a0fd9f024904b5da144819de3e3a0df","id":"3c47f8c4fbdd488facd1536744048b95"},{"type":"Edge","source_node_id":"00be8a4206dd4dd6b79adebe94235a29","target_node_id":"53ff3c44197e4da89fc11b8d74407b3a","branch_id":"d7c04184b0cb4861b1ed6284806b6fa0","id":"c33344613c614256b4096e9b2614d236","name":"d7c04184b0cb4861b1ed6284806b6fa0"},{"type":"Edge","source_node_id":"6a0fd9f024904b5da144819de3e3a0df","target_node_id":"00be8a4206dd4dd6b79adebe94235a29","id":"8e8fd62c09ed4d8697637df7e4d6690b"},{"type":"Edge","source_node_id":"00be8a4206dd4dd6b79adebe94235a29","target_node_id":"f932d029eb0f4996ae98b497ea34cfc5","branch_id":"8c0ceda9f5344e67a6f8c13995c3b9a7","id":"9ceea38c8b254d518c53925c5d2cb6c8","name":"8c0ceda9f5344e67a6f8c13995c3b9a7"}],"id":"123977e41c764de2b530cfbeea1d3fd1"}],"script_variables":[],"glide_variables":[{"type":"String","name":"employee_name","id":"3ab5e9c534314dbb9f29b74600358253"},{"type":"Reference","table":"sys_user","id":"d6242fe695644a68b5fecb4375483452","name":"list_employees"},{"type":"True/False","id":"4d355cfdfd8d48dd93a2a812b8305091","name":"another_lookup"},{"type":"Reference","table":"sys_user","id":"current-user","name":"user"}],"applicability":{"type":"Applicability","mode":"script","value":"true"},"roles":[],"scope":"e8a67563db0133004ab89c68db9619a0","id":"2c57bd2fdb0133004ab89c68db961926","name":"_PRVW__aefc9f36cc1a330045ed786397014e2f","key_phrases":["Find Employee","employee directory","view employee details","find user","user directory"],"nlu_provider":"","nlu_model":"","nlu_intent":"","flexible_conversation_switching":false,"design_category":"023ee76ddb5a3300ed7290c7db9619eb"}</design_definition>
        <design_topic_id>2c57bd2fdb0133004ab89c68db961926</design_topic_id>
        <name>_PRVW__aefc9f36cc1a330045ed786397014e2f</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2019-07-01 16:17:20</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>62fc9f36db1a3300ed7290c7db961933</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="Employee Directory Virtual Agent Conversations" source="x_126321_empdirva">e8a67563db0133004ab89c68db9619a0</sys_package>
        <sys_policy/>
        <sys_scope display_value="Employee Directory Virtual Agent Conversations">e8a67563db0133004ab89c68db9619a0</sys_scope>
        <sys_update_name>sys_cb_design_topic_62fc9f36db1a3300ed7290c7db961933</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2019-07-01 16:17:20</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
